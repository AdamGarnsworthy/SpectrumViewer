<html>
    <head>
        <!--libraries-->
        <script src='scripts/HTMLImports.min.js' type="text/javascript"></script>
        <script type='text/javascript' src='scripts/plotly-1.5.0.min.js'></script>
        <script src="scripts/jquery1-11-3.min.js" type="text/javascript"></script>
        <script src="scripts/bootstrap3-3-5.min.js" type="text/javascript"></script>
        <script src="scripts/mustache.js" type="text/javascript"></script>

        <!--stylesheets-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/custom.css"/>

        <!--scripts-->
        <script src="scripts/helpers.js" type="text/javascript"></script> 
        <script src="scripts/2dSpectrumViewer.js" type="text/javascript"></script> 

        <!--templates-->
        <link id='plotList' rel="import" href="templates/plotList/plotList.html">
        <link id='cutVertex' rel="import" href="templates/2dSpectrumViewer/cutVertex.html"> 
        <link id='footer' rel="import" href="templates/footer/footer.html"> 

    </head>

    <body>
        <div id='analyzerPlots'></div>

        <!--Plotting-->
        <div id='plotRegion' class='sectionWrapper item'>
            <div id='plotWrap' class='col-md-6 col-md-offset-1 plotRegion'>
                <div id='plotlyTarget'></div>
            </div>
            <div class='col-md-4 no-pad'>
                <div id='plotControl'>

                    <div id='updateWrap' class='UIgroup'>
                        <h4>Data Fetching</h4>
                        <div class="input-group">
                            <span class="input-group-addon">Update Every:</span>
                            <select id="upOptions" class='form-control' style='max-width:7em'>
                                <option value="3000" selected="selected">3 s</option>
                                <option value="5000">5 s</option>
                                <option value="10000">10 s</option>
                                <option value="-1">never</option>
                            </select>        
                        </div>
                        <button id="upNow" class="btn btn-default" type="button">Update Now</button>
                    </div>

                    <div id='cutBounds' class='UIgroup'>
                        <h4>Cut Bounds</h4>
                        <ul id='cutPolyVertices' class='list-unstyled'></ul>

                        <button class='btn btn-success' onclick='saveCutToODB()'>Save Cut Region to ODB</button>
                        <button id='x-success' class='btn btn-success hidden'>
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> x-vertices saved to ODB 
                        </button>
                        <button id='y-success' class='btn btn-success hidden'>
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> y-vertices saved to ODB 
                        </button>
                        <button id='x-fail' class='btn btn-error hidden'>
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> x-vertices failed to write to ODB! 
                        </button>
                        <button id='y-fail' class='btn btn-error hidden'>
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> y-vertices failed to write to ODB! 
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <div id='foot'></div>

        <script>
            window.addEventListener('HTMLImportsLoaded', function(e) {

                var _plotList;

                //generic asset setup
                dataStore.templates = prepareTemplates(['plotList', 'cutVertex', 'footer']);

                _plotList = new plotList('analyzerPlots');
                _plotControl = new plotControl('plotControl');

                _plotList.setup();
                _plotControl.setup();
                setupFooter('foot');

                //start with GRIFFIN menu displayed
                document.getElementById('demo').onclick();

                //empty plot
                generatePlot();
            });
        </script>
        
    </body>
</html>